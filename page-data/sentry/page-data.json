{"componentChunkName":"component---src-templates-blog-post-js","path":"/sentry/","result":{"data":{"site":{"siteMetadata":{"title":"Overblog","author":"zit"}},"markdownRemark":{"id":"bbc9ac06-ba9c-544c-a6a1-db7f1221322c","html":"<blockquote>\n<p>å…³é”®è¯ï¼š sentry docker æ›´æ¢æº</p>\n</blockquote>\n<h2 id=\"1-å…‹éš†-sentry-å®˜æ–¹éƒ¨ç½²ä»“åº“\"><a href=\"#1-%E5%85%8B%E9%9A%86-sentry-%E5%AE%98%E6%96%B9%E9%83%A8%E7%BD%B2%E4%BB%93%E5%BA%93\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. å…‹éš† sentry å®˜æ–¹éƒ¨ç½²ä»“åº“</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://github.com/getsentry/onpremise</code></pre></div>\n<h2 id=\"2-å®‰è£…-docker-docker-compose\"><a href=\"#2-%E5%AE%89%E8%A3%85-docker-docker-compose\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. å®‰è£… docker docker-compose</h2>\n<h3 id=\"ç‰ˆæœ¬è¦æ±‚\"><a href=\"#%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>ç‰ˆæœ¬è¦æ±‚</strong></h3>\n<ul>\n<li>Docker 17.05.0+</li>\n<li>Compose 1.23.0+</li>\n</ul>\n<blockquote>\n<p>Ubuntu16-18 å®‰è£…</p>\n</blockquote>\n<h3 id=\"å®‰è£…-docker\"><a href=\"#%E5%AE%89%E8%A3%85-docker\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>å®‰è£… docker</strong></h3>\n<ul>\n<li>\n<p>åˆ é™¤æ—§ç‰ˆæœ¬ Docker</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get remove docker docker-engine docker.io</code></pre></div>\n</li>\n<li>\n<p>æ·»åŠ  Docker è½¯ä»¶æº</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> apt-transport-https ca-certificates  <span class=\"token function\">curl</span> software-properties-common\n<span class=\"token function\">curl</span> -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -\n<span class=\"token function\">sudo</span> add-apt-repository <span class=\"token string\">\"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu <span class=\"token variable\"><span class=\"token variable\">$(</span>lsb_release -cs<span class=\"token variable\">)</span></span> stable\"</span></code></pre></div>\n</li>\n<li>\n<p>å®‰è£… Docker CEï¼ˆç¤¾åŒºç‰ˆï¼‰</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update -y\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> docker-ce -y</code></pre></div>\n</li>\n<li>\n<p>è®¾ç½®å¼€æœºå¯åŠ¨</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> docker\n<span class=\"token function\">sudo</span> systemctl start docker</code></pre></div>\n</li>\n<li>\n<p>æŠŠå½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> docker\n<span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG docker <span class=\"token environment constant\">$USER</span></code></pre></div>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker run hello-world</code></pre></div>\n<h3 id=\"å®‰è£…-docker-compose\"><a href=\"#%E5%AE%89%E8%A3%85-docker-compose\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>å®‰è£… docker-compose</strong></h3>\n</li>\n<li>\n<p>å®‰è£…</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> -L https://github.com/docker/compose/releases/download/1.18.0/docker-compose-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> -s<span class=\"token variable\">`</span></span>-<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">uname</span> -m<span class=\"token variable\">`</span></span> -o /usr/local/bin/docker-compose\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose</code></pre></div>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">  docker-compose --version</code></pre></div>\n</li>\n</ul>\n<blockquote>\n<p>mac å®‰è£…  </p>\n</blockquote>\n<p>  ç›´æ¥å®˜ç½‘ä¸‹è½½å®‰è£…ï¼Œ<a href=\"https://docs.docker.com/docker-for-mac/install/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">åœ°å€ç‚¹æˆ‘</a>ï¼Œå›½å†…ä¸‹è½½è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨è¿…é›·ä¸‹è½½ï¼ˆè¿…é›·ç”¨å®Œå°±åˆ ğŸ˜¼ï¼‰ï¼ŒDocker for Mac å’Œ Docker Toolbox å·²ç»åŒ…å«äº† Compose , æ‰€ä»¥ Mac ç”¨æˆ·ä¸ç”¨å•ç‹¬å®‰è£…Compose</p>\n<h2 id=\"3-æœ€é‡è¦çš„ä¸€æ­¥ï¼šæ›´æ¢æº\"><a href=\"#3-%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%9B%B4%E6%8D%A2%E6%BA%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. æœ€é‡è¦çš„ä¸€æ­¥ï¼šæ›´æ¢æº</h2>\n<p>è¿™é‡Œä¸»è¦æ›´æ¢ä¸¤å¤„æº</p>\n<ul>\n<li>\n<p>æ›´æ¢ docker é•œåƒæº</p>\n<div class=\"gatsby-highlight\" data-language=\"jsxon\"><pre class=\"language-jsxon\"><code class=\"language-jsxon\">&quot;registry-mirrors&quot;: [\n  &quot;https://xxxxxx.mirror.aliyuncs.com&quot;,\n  &quot;http://docker.mirrors.ustc.edu.cn&quot;,\n  &quot;http://hub-mirror.c.163.com&quot;\n]</code></pre></div>\n</li>\n<li>\n<p><strong>æ›´æ¢ apt-get æº(é‡è¦ï¼ï¼ï¼)</strong><br>\nè¿™é‡Œæ˜¯ä¿®æ”¹é•œåƒä¸­ apt debian çš„æºï¼Œå¦åˆ™å›½å†…ä¸‹è½½è¦å¾ˆä¹…å¾ˆä¹…  </p>\n<ul>\n<li>è¿›åˆ°ç¬¬ä¸€æ­¥å…‹éš†çš„ onpremise ç›®å½•</li>\n<li>æ‰“å¼€ cron ä¸‹çš„ Dockerfile</li>\n<li>\n<p>å°†</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">RUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y --no-install-recommends <span class=\"token function\">cron</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token function\">rm</span> -r /var/lib/apt/lists/*</code></pre></div>\n<p>æ›¿æ¢æˆ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">RUN <span class=\"token function\">sed</span> -i <span class=\"token string\">\"s@http://deb.debian.org@http://mirrors.aliyun.com@g\"</span> /etc/apt/sources.list\nRUN <span class=\"token function\">sed</span> -i <span class=\"token string\">\"s@http://security.debian.org/debian-security@http://mirrors.aliyun.com/debian-security@g\"</span> /etc/apt/sources.list <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">rm</span> -Rf /var/lib/apt/lists/*\n\nRUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y --no-install-recommends <span class=\"token function\">cron</span> apt-utils <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token function\">rm</span> -r /var/lib/apt/lists/*</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-æœ€å\"><a href=\"#4-%E6%9C%80%E5%90%8E\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. æœ€å</h2>\n<ul>\n<li>onpremise ç›®å½•ä¸‹ <code class=\"language-text\">./install.sh</code></li>\n<li>\n<p>å¯åŠ¨</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up -d</code></pre></div>\n</li>\n<li>\n<p>åœæ­¢</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose stop</code></pre></div>\n</li>\n</ul>\n<p>ç»“æŸï¼Œå®Œç¾ã€‚</p>","timeToRead":3,"frontmatter":{"title":"sentry éƒ¨ç½²æç®€æ•™ç¨‹","date":"August 31, 2020","spoiler":"docker ä¸€é”®éƒ¨ç½²","cta":"react"},"fields":{"slug":"/sentry/","langKey":"en"}}},"pageContext":{"slug":"/sentry/","previous":{"fields":{"slug":"/react-15-to-16/","langKey":"en","directoryName":"react-15-to-16"},"frontmatter":{"title":"react 15.4.2 åˆ° 16.13.1 å‡çº§è¿‡ç¨‹"}},"next":{"fields":{"slug":"/search-in-terminal/","langKey":"en","directoryName":"search-in-terminal"},"frontmatter":{"title":"åœ¨å‘½ä»¤è¡Œä½¿ç”¨è°·æ­Œæœç´¢"}},"translations":[],"translatedLinks":[]}},"staticQueryHashes":["708209134"]}